<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>promise</title>
  </head>
  <body>
    <script type="text/javascript" src="./immediate"></script>
    <script type="text/javascript">
      // function promise1() {
      //   return new Promise((resolve, rejected) => {
      //     setTimeout(() => {
      //         resolve('this is promise1 return value')
      //     }, 1000)
      //   })
      // }
      //
      // function promise2() {
      //   return new Promise((resolve, rejected) => {
      //     setTimeout(() => {
      //         resolve('this is promise2 return value')
      //     }, 500)
      //   })
      // }
      //
      // promise1().then(data => {
      //   console.log(data)
      //   return promise2()
      // }).then(data => {
      //   console.log(data)
      // })



      [1, 3, 2, 4].reduce((pre, next) => {
      	const p = new Promise(rs => setTimeout(rs, next*1000))
      	return pre.then(() => {
          return p
        }).then(() => {
          console.log(next)   // 1,3,2,4
        })
      }, Promise.resolve())


    </script>
  </body>
</html>
