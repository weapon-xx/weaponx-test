<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title></title>
  </head>
  <body>
    <ul id="list" class="foo">
      <li>#0</li>
      <li><span>#1</span></li>
      <li>#2</li>
      <li>#3</li>
      <li><ul><li>#4</li></ul></li>
      <li>#5</li>
      <li>#6</li>
      <li>#7</li>
      <li>#8</li>
      <li>#9</li>
      <li>#10</li>
      <li><a href="//v2ex.com">#99998</a></li>
      <li>#99999</li>
      <li>#100000</li>
    </ul>
    <script type="text/javascript">
    (function(){
      const $uls = document.querySelectorAll('ul'),
            $lis = document.querySelectorAll('li');
            console.log($lis)

      $uls.forEach(function(item,index){
        addClass(item,'bar')
      })

      function addClass(el,cls){
        var _class = el.getAttribute('class');
        if(_class){
          _class += ' ' + cls;
          el.setAttribute('class',_class)
        }else{
          el.setAttribute('class',cls)
        }
      }

      $uls[0].removeChild($lis[10])

      var _li = document.createElement('li');
      textNode = document.createTextNode('<v2ex.com />')
      _li.appendChild(textNode);

      $uls[0].insertBefore(_li,$lis[9])


      $lis.forEach(function(item){
        item.addEventListener('click',function(e){
          var parentNode = Array.prototype.slice.call($lis,0)
          var index = parentNode.indexOf(e.target);
          console.log(index);
        },false)
      })

    })()
    </script>
  </body>
</html>
