<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title></title>
  </head>
  <body>
    <div id="example">
      <panel :level="1" :items="items" :clickHandler="clickHandler">1231231</panel>
    </div>
    <script type="text/javascript" src="./vue.js"></script>
    <script type="text/javascript">

      Vue.component('textbox', {
        template: `
          <h1>{{message}}</h1>
        `,
        data() {
          return {

          }
        },
        props: ['message']
      })

      Vue.component('panel', {
        render: function (createElement) {
          return createElement(
            'div',
            {
              'class': {
                foo: true,
                active: true
              },
              style: {
                color: 'blue',
                fontSize: '20px'
              },
              attrs: {
                dataId: 'test'
              }
            },
            this.items.map((item) => {
              return createElement(item.type, {
                on: {
                  click: item.clickHandler
                },
                props: item.props
              })
            })
          )
        },
        props: {
          level: {
            type: Number,
            required: true
          },
          items: {
            type: Array,
            default: []
          }
        }
      })

      const vm = new Vue({
        el: '#example',
        data() {
          return {
            items: [{
              text: '1',
              type: 'textbox',
              props: {
                message: '1'
              },
              clickHandler(e) {
                console.log(e)
              }
            }, {
              text: '2',
              type: 'textbox',
              props: {
                message: '2'
              },
              clickHandler() {
                console.log(this)
              }
            }],
            clickHandler: function(e) {
              console.log(this);
              console.log(e);
            }
          }
        }
      })
    </script>
  </body>
</html>
